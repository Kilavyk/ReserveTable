<!-- templates/core/menu.html -->
{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–µ–Ω—é ‚Äî Gourmet Haven</title>
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <style>
    .price-tag {
      color: #d4a017;
      font-size: 1.1em;
      font-weight: bold;
    }
    .dish-badge {
      background: #28a745;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      margin-bottom: 5px;
      display: inline-block;
    }
    .menu-category {
      margin-bottom: 3rem;
    }
    .category-icon {
      margin-right: 10px;
    }
    .card {
      border: none;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .card:hover {
      transform: translateY(-2px);
    }
    .menu-item h4 {
      color: #2c3e50;
      margin-bottom: 8px;
    }
    .menu-item p {
      color: #6c757d;
      line-height: 1.5;
    }
    .text-outline {
      color: white;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
  </style>
</head>
<body>

    {% include 'includes/header.html' %}

    <div class="container mt-5">
        <div class="content-box">
            <h1 class="text-center mb-4 text-outline">–ù–∞—à–µ –ú–µ–Ω—é</h1>

            {% for category in categories %}
            <section class="menu-category">
                <h2 class="mb-3 text-outline">
                    <span class="category-icon">
                        {% if category.name == "–•–æ–ª–æ–¥–Ω—ã–µ –∑–∞–∫—É—Å–∫–∏" %}ü•ó
                        {% elif category.name == "–°–∞–ª–∞—Ç—ã" %}ü•ô
                        {% elif category.name == "–°—É–ø—ã" %}üç≤
                        {% elif category.name == "–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞" %}üçñ
                        {% elif category.name == "–ì–∞—Ä–Ω–∏—Ä—ã" %}üçü
                        {% elif category.name == "–î–µ—Å–µ—Ä—Ç—ã" %}üç∞
                        {% elif category.name == "–ì–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏" %}‚òï
                        {% elif category.name == "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏" %}ü•§
                        {% elif category.name == "–ê–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏" %}üç∑
                        {% else %}üçΩÔ∏è
                        {% endif %}
                    </span>{{ category.name }}
                </h2>

                {% for item in category.menuitem_set.all %}
                  {% if item.is_available %}
                  <div class="card mb-3">
                      <div class="card-body">
                          <div class="menu-item d-flex justify-content-between align-items-start">
                              <div class="flex-grow-1">
                                  <h4 class="mb-1">{{ item.name }}</h4>
                                  <p class="mb-1">{{ item.description }}</p>
                                  {% if item.ingredients %}
                                  <p class="mb-0 small text-muted">
                                      <strong>–°–æ—Å—Ç–∞–≤:</strong> {{ item.ingredients }}
                                  </p>
                                  {% endif %}
                                  {% if item.weight or item.volume %}
                                  <p class="mb-0 small text-muted">
                                      {% if item.weight %}
                                          <strong>–í–µ—Å:</strong> {{ item.weight }} –≥
                                      {% elif item.volume %}
                                          <strong>–û–±—ä–µ–º:</strong> {{ item.volume }} –º–ª
                                      {% endif %}
                                  </p>
                                  {% endif %}
                              </div>
                              <div class="ms-3 text-end">
                                  {% if item.dish_type == 'food' %}
                                    {% if '—Å—Ç–µ–π–∫' in item.name.lower or '—Å—Ç–µ–π–∫' in item.description.lower %}
                                    <span class="dish-badge">–ù–æ–≤–∏–Ω–∫–∞</span>
                                    {% elif '—Ü–µ–∑–∞—Ä—å' in item.name.lower %}
                                    <span class="dish-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</span>
                                    {% elif item.name == '–ì—Ä–µ—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç' %}
                                    <span class="dish-badge">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ–µ</span>
                                    {% endif %}
                                  {% endif %}
                                  <div class="price-tag">{{ item.price }} ‚ÇΩ</div>
                              </div>
                          </div>
                      </div>
                  </div>
                  {% endif %}
                {% empty %}
                  <div class="alert alert-info">
                    –í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–ª—é–¥.
                  </div>
                {% endfor %}
            </section>
            {% empty %}
            <div class="alert alert-warning text-center">
                <h4>–ú–µ–Ω—é –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ</h4>
                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–π–¥–∏—Ç–µ –ø–æ–∑–∂–µ.</p>
            </div>
            {% endfor %}

        </div>
    </div>

    {% include 'includes/footer.html' %}

  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>